

# 视频和日志文件复制工具

该工具旨在根据指定的时间范围从服务器复制视频文件，并使用 `rsync` 复制日志文件。同时也支持自定义的复制操作。

## 功能

- **视频文件复制**：根据指定的时间范围，将源目录中的视频文件复制到目标目录。
- **日志文件复制**：使用 `rsync` 复制日志文件。
- **自定义复制**：支持根据需求进行自定义复制操作。

## 使用方法

### 源目录和目标目录

- **源目录**：`/tmp/record`
- **目标目录**：`/tmp/record_dest`

### 磁盘空间信息

工具使用以下命令获取目标目录的磁盘空间信息：

```sh
df | grep /tmp/record_dest | grep -v loop | awk '{print $6 "|" $2 "|" $4}'
```

此命令输出目标目录的挂载点、总大小和可用大小。

### 日期格式

工具中使用的日期格式如下：

```
YYYYMMDDHHMMSSMMM|YYYYMMDDHHMMSSMMM
```

- `YYYY`：年份
- `MM`：月份
- `DD`：日期
- `HH`：小时
- `MM`：分钟
- `SS`：秒
- `MMM`：毫秒

示例：

```
20230830210000000|20230830215000000
```

表示时间范围从 2023 年 8 月 30 日 21:00:00.000 到 2023 年 8 月 30 日 21:50:00.000。

## 构建步骤

要构建该工具，需要安装 CMake。请按照以下步骤操作：

1. **克隆仓库**：
   ```sh
   git clone <仓库地址>
   cd <仓库目录>
   ```

2. **创建构建目录**：
   ```sh
   mkdir build
   cd build
   ```

3. **生成构建文件**：
   ```sh
   cmake ..
   ```

4. **构建项目**：
   ```sh
   cmake --build .
   ```

## 运行步骤

要运行该工具，导航到构建目录并执行生成的二进制文件：

```sh
./bin/MyProject
```

按照屏幕上的提示输入源目录、目标目录和视频文件的时间范围。

## 示例

以下是使用该工具的示例：

1. **启动工具**：
   ```sh
   ./bin/MyProject
   ```

2. **输入提示**：
   ```
   1-video 2-log
   src: /tmp/record
   dst: /tmp/record_dest
   dateValue: 20230830210000000|20230830215000000
   是否继续？(1: 继续, 0: 退出): 0
   ```

这将根据指定的时间范围，将 `/tmp/record` 中的视频文件复制到 `/tmp/record_dest`。

## 注意事项

- 确保源目录和目标目录可访问，并具有必要的读写权限。
- 该工具要求安装 `rsync` 以进行日志文件复制。

